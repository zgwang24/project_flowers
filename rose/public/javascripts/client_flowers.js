function connect(e){socket=io.connect("http://10.107.31.156:8128/flower"),socket.on("connection",function(){e.connectCallback()}),socket.on("disconnect",function(){e.disconnectCallback()}),socket.on("error",function(c){e.socketErrorCallback(c)}),socket.connect()}function createWish(e,c,n,t,s,o,a,i,r){connect(r);var l={};l.plateform=e,l.orderId=c,l.head=s,l.content=o,l.name=a,l.getPhone=n,l.order="0";var u={};u.phone=n,u.setPhone=t,u.wishes=[l],u.flowerShop=i,socket.emit("createWish",u),socket.on("createWishSucceed",function(e){r.successCallback(e)}),socket.on("createWishFailed",function(e){r.errorCallback(e)})}function readWish(e,c,n){connect(n);var t={};t.phone=e,t.flowerShop=c,socket.emit("readWish",t),socket.on("readWishSucceed",function(e){for(var c=0;c<e.length;c++)e[c].date=e[c].date.substring(0,10),e[c].order=c+"";n.successCallback(e)}),socket.on("readWishFailed",function(e){n.errorCallback(e)})}function readWishBySetPhone(e,c,n,t){connect(t);var s={};s.setPhone=e,s.flowerShop=n,s.phone=c,socket.emit("readWishBySetPhone",s),socket.on("readWishBySetPhoneSucceed",function(e){for(var c=0;c<e.length;c++)e[c].date=e[c].date.substring(0,10),e[c].order=c+"";t.successCallback(e)}),socket.on("readWishBySetPhoneFailed",function(e){t.errorCallback(e)})}function register(e,c,n){connect(n);var t={};t.phone=e,t.password=c,socket.emit("register",t),socket.on("createUserSucceed",function(e){n.successCallback(e)}),socket.on("createUserFailed",function(e){n.errorCallback(e)})}function login(e,c,n){connect(n);var t={};t.phone=e,t.password=c,socket.emit("login",t),socket.on("readUserSucceed",function(e){n.successCallback(e)}),socket.on("readUserFailed",function(e){n.errorCallback(e)})}function update(e,c,n){connect(n);var t={};t.phone=e,t.password=c,socket.emit("update",t),socket.on("updateUserSucceed",function(e){n.successCallback(e)}),socket.on("updateUserFailed",function(e){n.errorCallback(e)})}function send(e,c){connect(c),socket.emit("sendMessage",e),socket.on("sendMessageSucceed",function(e){c.successCallback(e)})}function loginMessage(e,c,n){connect(n);var t={};t.phone=e,t.product=c,socket.emit("loginMessage",t),socket.on("loginMessageSucceed",function(e){n.successCallback(e)})}function registerMessage(e,c,n){connect(n);var t={};t.phone=e,t.product=c,socket.emit("registerMessage",t),socket.on("registerMessageSucceed",function(e){n.successCallback(e)})}function identityMessage(e,c,n){connect(n);var t={};t.phone=e,t.product=c,socket.emit("identityMessage",t),socket.on("identityMessageSucceed",function(e){n.successCallback(e)})}function updateMessage(e,c,n){connect(n);var t={};t.phone=e,t.product=c,socket.emit("updateMessage",t),socket.on("updateMessageSucceed",function(e){n.successCallback(e)})}var socket=null,client={};client.createWish=createWish,client.readWish=readWish,client.register=register,client.login=login,client.update=update,client.send=send,client.loginMessage=loginMessage,client.registerMessage=registerMessage,client.identityMessage=identityMessage,client.updateMessage=updateMessage,client.readWishBySetPhone=readWishBySetPhone;